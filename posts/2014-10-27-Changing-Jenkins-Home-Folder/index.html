



<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <base href="http://blog.codybunch.com">
    <title> Changing Jenkins Home Folder </title>
    <link rel="canonical" href="http://blog.codybunch.com/posts/2014-10-27-Changing-Jenkins-Home-Folder">
    

<link rel="stylesheet" href="/css/poole.css">
<link rel="stylesheet" href="/css/syntax.css">
<link rel="stylesheet" href="/css/lanyon.css">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

</head>


<body class="theme-base-08">
  


<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    <a class="sidebar-nav-item" href="/posts">Blog</a>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2014 Spencer Lyon. Powered by <a href="http://hugo.spf13.com">Hugo</a>. Design adapted from <a href="http://lanyon.getpoole.com">Lanyon</a>.
    </p>
  </div>
</div>


  
  <div class="wrap">
    <div class="masthead">
      <div class="container">
        <h3 class="masthead-title">
          <a href="/posts" title="Blog">Blog Posts</a>
        </h3>
      </div>
    </div>

    
    <div class="container content">
      <h1 class="post-title">Changing Jenkins Home Folder</h1>
        <section id="main">
          <h5 id="date"> Mon Oct 27, 2014 </h5>
          

<p>Everything Jenkins does happens in the context of the jenkins user by default. While that sounds obvious, it has some interesting implications if you aren&rsquo;t careful.</p>

<h2 id="toc_0">The Problem</h2>

<p>In my homelab, I&rsquo;ve installed 14.04 onto a 16gb usb key. This is a hold over from the days when it was an ESXi lab, but, it works for the most part. However, for things like downloading vagrant boxes and the like, one needs to mount external storage. Enter the problem: Jenkins sets itself up in /var/lib/jenkins by default, which lives on my very limited usb stick.</p>

<p>This in turn means anytime Jenkins tried to &lsquo;vagrant up&rsquo; a thing, it would fill my root partition trying to store all the temporary files vagrant used. Whoops.</p>

<h2 id="toc_1">Changing the Jenkins Home Directory</h2>

<p>There are a number of posts out there on how to do this. None of them, however, addressed the vagrant issue in particular. To do that, one has to hit it with a larger bat.</p>

<h3 id="toc_2">First Change /etc/defaults</h3>

<p>The first thing to do, is change how Jenkins thinks of itself. The most straight forward way I found was to change that in /etc/defaults/jenkins. This will be around line 23 or 25:</p>

<pre><code># jenkins home location
JENKINS_HOME=/new/location
</code></pre>

<h3 id="toc_3">Then Change /etc/passwd</h3>

<p>This is the step that was needed to fix the problem of Jenkins running vagrant and vagrant subsequently filling /:</p>

<p>Change:
<code>jenkins:x:105:114:Jenkins,,,:/var/lib/jenkins:/bin/bash</code></p>

<p>To this:
<code>jenkins:x:105:114:Jenkins,,,:/new/location:/bin/bash</code></p>

<h3 id="toc_4">Finally Restart Jenkins</h3>

<p>Now to make sure all the things stick:</p>

<p><code>sudo /etc/init.d/jenkins restart</code></p>

<h2 id="toc_5">Summary</h2>

<p>In this post we showed you how to change the Jenkins home directory, and why it&rsquo;s also important to change it in /etc/passwd.</p>

        </section>
    </div>
  </div>

  <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  

<div class="container">
  <hr />
  <hr />
  
    <span class="left">
    &nbsp; <em>&laquo; Previous:</em> <a class="next" href="http://blog.codybunch.com/posts/2014-10-28-Using-Packer-to-Make-Vagrant-Boxes">Using Packer to Make Vagrant Boxes</a>
    </span>
  

  
    <span class="right">
    <em>Next: </em><a class="next" href="http://blog.codybunch.com/posts/2014-10-23-ZeroVM---A-ZeroCloud-Lab"> &nbsp; ZeroVM - A ZeroCloud Lab</a> &raquo;
    </span>
  
</div>

  <br />
  
<div class="container">
  <ul class="catlist">
    <li><em>Categories: </em></li>
    
  </ul>
</div>



  
  

<div class="container content">
<footer>
  <div>
    <p class="right credit">
    Fancy footer here. Link to <a href="/">Home Page</a>
    </p>
  </div>
</footer>
</div>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36732392-2', 'sglyon.com');
  ga('send', 'pageview');

</script>


</body>
</html>




